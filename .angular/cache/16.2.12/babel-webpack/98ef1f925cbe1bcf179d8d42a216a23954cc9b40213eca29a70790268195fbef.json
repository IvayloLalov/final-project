{"ast":null,"code":"import { inject } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { ApiService } from '../api.service';\nexport const IsOwnerGuard = (route, state) => {\n  const router = inject(Router);\n  const api = inject(ApiService);\n  const userId = localStorage.getItem('userId');\n  const restaurantId = route.params['restaurantId'];\n  let isOwner = false;\n  api.getRestaurant(restaurantId).subscribe(restaurant => {\n    isOwner = restaurant._ownerId === userId;\n    console.log('owner1', isOwner);\n  });\n  console.log('user', userId);\n  console.log('owner2', isOwner);\n  //\n  return;\n  if (isOwner) {\n    return true;\n  } else {\n    router.navigate(['/home']);\n    return false;\n  }\n};","map":{"version":3,"names":["inject","Router","ApiService","IsOwnerGuard","route","state","router","api","userId","localStorage","getItem","restaurantId","params","isOwner","getRestaurant","subscribe","restaurant","_ownerId","console","log","navigate"],"sources":["D:\\SoftUni JS Angular\\Final Project\\final-project\\src\\app\\guards\\isOwner.guard.ts"],"sourcesContent":["import { Injectable, inject } from '@angular/core';\r\nimport { CanActivateFn, Router } from '@angular/router';\r\nimport { ApiService } from '../api.service';\r\n\r\n\r\n\r\nexport const IsOwnerGuard: CanActivateFn = (route, state) => {\r\n\r\n  const router = inject(Router);\r\n  const api = inject(ApiService);\r\n  const userId = localStorage.getItem('userId');\r\n  const restaurantId = route.params['restaurantId'];\r\n  let isOwner: boolean = false;\r\n  api.getRestaurant(restaurantId).subscribe((restaurant) => {\r\n    isOwner = restaurant._ownerId === userId;\r\n    console.log('owner1', isOwner);\r\n  });\r\n\r\n  console.log('user', userId);\r\n  console.log('owner2', isOwner);\r\n  //\r\n\r\n return if (isOwner) {\r\n    return true;\r\n  } else {\r\n    router.navigate(['/home']);\r\n    return false;\r\n  }\r\n};\r\n"],"mappings":"AAAA,SAAqBA,MAAM,QAAQ,eAAe;AAClD,SAAwBC,MAAM,QAAQ,iBAAiB;AACvD,SAASC,UAAU,QAAQ,gBAAgB;AAI3C,OAAO,MAAMC,YAAY,GAAkBA,CAACC,KAAK,EAAEC,KAAK,KAAI;EAE1D,MAAMC,MAAM,GAAGN,MAAM,CAACC,MAAM,CAAC;EAC7B,MAAMM,GAAG,GAAGP,MAAM,CAACE,UAAU,CAAC;EAC9B,MAAMM,MAAM,GAAGC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC;EAC7C,MAAMC,YAAY,GAAGP,KAAK,CAACQ,MAAM,CAAC,cAAc,CAAC;EACjD,IAAIC,OAAO,GAAY,KAAK;EAC5BN,GAAG,CAACO,aAAa,CAACH,YAAY,CAAC,CAACI,SAAS,CAAEC,UAAU,IAAI;IACvDH,OAAO,GAAGG,UAAU,CAACC,QAAQ,KAAKT,MAAM;IACxCU,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAEN,OAAO,CAAC;EAChC,CAAC,CAAC;EAEFK,OAAO,CAACC,GAAG,CAAC,MAAM,EAAEX,MAAM,CAAC;EAC3BU,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAEN,OAAO,CAAC;EAC9B;EAED;EAAO,IAAIA,OAAO,EAAE;IACjB,OAAO,IAAI;GACZ,MAAM;IACLP,MAAM,CAACc,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC;IAC1B,OAAO,KAAK;;AAEhB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}