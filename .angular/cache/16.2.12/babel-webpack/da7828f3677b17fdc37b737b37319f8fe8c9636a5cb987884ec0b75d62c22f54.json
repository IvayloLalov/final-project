{"ast":null,"code":"import { inject } from '@angular/core';\nimport { tap } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../api.service\";\nclass PermissionsService {\n  constructor(router, api) {\n    this.router = router;\n    this.api = api;\n    this.restaurant = {};\n  }\n  canActivate(next, state) {\n    const id = next.params['restaurantId'];\n    const userId = localStorage.getItem('userId');\n    this.api.getRestaurant(id).pipe(tap(restaurant => {\n      this.restaurant = restaurant;\n    }));\n    console.log(userId);\n    console.log(this.restaurant._ownerId);\n    return true;\n  }\n  static #_ = this.ɵfac = function PermissionsService_Factory(t) {\n    return new (t || PermissionsService)(i0.ɵɵinject(i1.Router), i0.ɵɵinject(i2.ApiService));\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: PermissionsService,\n    factory: PermissionsService.ɵfac,\n    providedIn: 'root'\n  });\n}\nexport const IsOwnerGuard = (next, state) => {\n  return inject(PermissionsService).canActivate(next, state);\n};","map":{"version":3,"names":["inject","tap","PermissionsService","constructor","router","api","restaurant","canActivate","next","state","id","params","userId","localStorage","getItem","getRestaurant","pipe","console","log","_ownerId","_","i0","ɵɵinject","i1","Router","i2","ApiService","_2","factory","ɵfac","providedIn","IsOwnerGuard"],"sources":["D:\\SoftUni JS Angular\\Final Project\\final-project\\src\\app\\guards\\isOwner.guard.ts"],"sourcesContent":["import { Injectable, inject } from '@angular/core';\r\nimport {\r\n  Router,\r\n  ActivatedRouteSnapshot,\r\n  RouterStateSnapshot,\r\n  CanActivateFn,\r\n} from '@angular/router';\r\nimport { ApiService } from '../api.service';\r\nimport { tap } from 'rxjs';\r\nimport { Restaurant } from 'src/types/restaurant';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nclass PermissionsService {\r\n  constructor(private router: Router, private api: ApiService) {}\r\n  restaurant = {} as Restaurant;\r\n  canActivate(\r\n    next: ActivatedRouteSnapshot,\r\n    state: RouterStateSnapshot\r\n  ): boolean {\r\n    const id = next.params['restaurantId'];\r\n    const userId = localStorage.getItem('userId');\r\n\r\n    this.api.getRestaurant(id).pipe(\r\n      tap((restaurant) => {\r\n        this.restaurant = restaurant;\r\n      })\r\n    );\r\n\r\n    console.log(userId);\r\n    console.log(this.restaurant._ownerId);\r\n\r\n    return true;\r\n  }\r\n}\r\n\r\nexport const IsOwnerGuard: CanActivateFn = (\r\n  next: ActivatedRouteSnapshot,\r\n  state: RouterStateSnapshot\r\n): boolean => {\r\n  return inject(PermissionsService).canActivate(next, state);\r\n};\r\n"],"mappings":"AAAA,SAAqBA,MAAM,QAAQ,eAAe;AAQlD,SAASC,GAAG,QAAQ,MAAM;;;;AAG1B,MAGMC,kBAAkB;EACtBC,YAAoBC,MAAc,EAAUC,GAAe;IAAvC,KAAAD,MAAM,GAANA,MAAM;IAAkB,KAAAC,GAAG,GAAHA,GAAG;IAC/C,KAAAC,UAAU,GAAG,EAAgB;EADiC;EAE9DC,WAAWA,CACTC,IAA4B,EAC5BC,KAA0B;IAE1B,MAAMC,EAAE,GAAGF,IAAI,CAACG,MAAM,CAAC,cAAc,CAAC;IACtC,MAAMC,MAAM,GAAGC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC;IAE7C,IAAI,CAACT,GAAG,CAACU,aAAa,CAACL,EAAE,CAAC,CAACM,IAAI,CAC7Bf,GAAG,CAAEK,UAAU,IAAI;MACjB,IAAI,CAACA,UAAU,GAAGA,UAAU;IAC9B,CAAC,CAAC,CACH;IAEDW,OAAO,CAACC,GAAG,CAACN,MAAM,CAAC;IACnBK,OAAO,CAACC,GAAG,CAAC,IAAI,CAACZ,UAAU,CAACa,QAAQ,CAAC;IAErC,OAAO,IAAI;EACb;EAAC,QAAAC,CAAA,G;qBApBGlB,kBAAkB,EAAAmB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,MAAA,GAAAH,EAAA,CAAAC,QAAA,CAAAG,EAAA,CAAAC,UAAA;EAAA;EAAA,QAAAC,EAAA,G;WAAlBzB,kBAAkB;IAAA0B,OAAA,EAAlB1B,kBAAkB,CAAA2B,IAAA;IAAAC,UAAA,EAFV;EAAM;;AAyBpB,OAAO,MAAMC,YAAY,GAAkBA,CACzCvB,IAA4B,EAC5BC,KAA0B,KACf;EACX,OAAOT,MAAM,CAACE,kBAAkB,CAAC,CAACK,WAAW,CAACC,IAAI,EAAEC,KAAK,CAAC;AAC5D,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}